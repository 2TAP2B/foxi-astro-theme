---
// Components
// - Layout
import Row from '../../ui/Row.astro'
import Col from '../../ui/Col.astro'
import StickySidebar from '../basic/StickySidebar.astro'

// - UI
import Feature from '../../ui/Feature.astro'

// Props
type Props = {
	title: string
	text?: string
	data: any
	classes?: string
}
const { title, text, data, classes } = Astro.props

// Define the category to filter by
const categoryToFilter = title

// Group features by category
const filteredFeatures = data.filter((feature: any) => feature.category === categoryToFilter)
---

<StickySidebar classes={classes}>
	<header slot="sidebar">
		{title && <h3>{title}</h3>}
		{text && <p class="text-lg leading-relaxed">{text}</p>}
	</header>

	<Row>
		{
			// Map through the filtered features and render them
			filteredFeatures.map((feature: any) => (
				<Col span="4">
					<Feature title={feature.title} icon={feature.icon} align="left" classes="mb-12">
						{feature.description}
					</Feature>
				</Col>
			))
		}
	</Row>
</StickySidebar>
