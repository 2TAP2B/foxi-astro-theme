---
import Button from './Button.astro'
import Switcher from './ModeSwitcher.astro'

// Logo
const logo = { src: 'logo.svg', alt: 'wind ui' }

// Navigation links
const navItems = [
	{ name: 'Home', link: '/' },
	{ name: 'About', link: '/about' },
	{ name: 'Services', link: '/services' },
	{ name: 'Contact', link: '/contact' }
]
type navItem = {
	link: string
	name: string
}
// Action buttons
const navActions = [
	{ name: 'Try it now', link: '/', style: 'primary' as const, size: 'lg' as const }
]
---

<header class="header">
	<div class="header__container">
		<nav aria-label="main navigation" role="navigation" class="header__nav">
			<!-- Logo -->
			<a href="/" class="header__logo">
				<img src={logo.src} alt={logo.alt} />
			</a>

			<!-- Menu toggle -->
			<button
				id="header-toggle"
				class="header__toggle"
				aria-expanded="false"
				aria-label="Toggle navigation"
			>
				<div class="header__toggle-inner">
					<span aria-hidden="true"></span>
					<span aria-hidden="true"></span>
					<span aria-hidden="true"></span>
				</div>
			</button>

			<!-- Navigation links -->
			<ul role="menubar" aria-label="Select page" class="header__menu" }>
				{
					navItems.map((item: navItem) => (
						<li role="none" class="header__menu-item">
							<a href={item.link} role="menuitem" class="header__menu-link">
								{item.name}
							</a>
						</li>
					))
				}
			</ul>

			<!-- Theme Switcher -->
			<Switcher />
			<!-- Navigation action buttons -->
			<div class="header__actions">
				{
					navActions.map((action) => (
						<Button link={action.link} name={action.name} style={action.style} size={action.size} />
					))
				}
			</div>
		</nav>
	</div>
</header>

<script>
	const headerToggle = document.querySelector('.header__toggle')
	const headerMenu = document.querySelector('.header__menu')
	if (headerToggle && headerMenu) {
		headerToggle.addEventListener('click', () => {
			headerToggle.classList.toggle('header__toggle--open')
			const isExpanded = headerToggle.getAttribute('aria-expanded') === 'true'
			const newExpandedValue = isExpanded ? 'false' : 'true'
			headerToggle.setAttribute('aria-expanded', newExpandedValue)
			headerMenu.classList.toggle('header__menu--open')
		})
	}
</script>
<style>
	.header {
		@apply relative z-20 w-full bg-white/90 shadow-lg shadow-neutral-700/5 after:absolute after:left-0 after:top-full after:z-10 after:block after:h-px after:w-full lg:backdrop-blur-sm lg:after:hidden dark:bg-neutral-900/90 dark:shadow-neutral-950/50;
	}
	.header__container {
		@apply relative mx-auto max-w-full px-6 lg:max-w-5xl xl:max-w-7xl 2xl:max-w-[96rem];
	}
	.header__logo {
		@apply flex items-center gap-2 whitespace-nowrap py-3 text-lg focus:outline-none lg:flex-1;
	}
	.header__nav {
		@apply flex h-[5.5rem] items-stretch justify-between font-medium text-neutral-700 dark:text-neutral-50;
	}
	.header__menu {
		@apply invisible absolute left-0 top-0 z-[-1] ml-auto h-screen w-full justify-center overflow-hidden overflow-y-auto overscroll-contain bg-white/90 px-8 pb-12 pt-28 font-medium opacity-0 transition-[opacity,visibility] duration-300 lg:visible lg:relative lg:top-0 lg:z-0 lg:flex lg:h-full lg:w-auto lg:items-stretch lg:overflow-visible lg:bg-white/0 lg:px-0 lg:py-0 lg:pt-0 lg:opacity-100 dark:bg-neutral-900/90;
	}
	.header__menu--open {
		@apply visible opacity-100 backdrop-blur-sm;
	}
	.header__menu-item {
		@apply flex items-stretch;
	}
	.header__menu-link {
		@apply flex items-center gap-2 py-4 transition-colors duration-300 hover:text-primary-500 focus:text-primary-600 focus:outline-none focus-visible:outline-none lg:px-8;
	}
	.header__toggle {
		@apply relative order-10 block h-10 w-10 self-center lg:hidden [&--open]:visible [&--open]:opacity-100;
	}
	.header__toggle-inner {
		@apply absolute left-1/2 top-1/2 w-6 -translate-x-1/2 -translate-y-1/2 transform;
	}
	.header__toggle-inner span {
		@apply absolute block h-0.5 transform rounded-full bg-neutral-900 transition-all duration-300 dark:bg-white;
	}
	.header__toggle-inner span:nth-child(1) {
		@apply w-9/12 -translate-y-2 [.header\_\_toggle--open_&]:w-6 [.header\_\_toggle--open_&]:translate-y-0 [.header\_\_toggle--open_&]:rotate-45;
	}
	.header__toggle-inner span:nth-child(2) {
		@apply w-6 [.header\_\_toggle--open_&]:-rotate-45;
	}
	.header__toggle-inner span:nth-child(3) {
		@apply w-1/2 origin-top-left translate-y-2 [.header\_\_toggle--open_&]:w-0;
	}
	.header__actions {
		@apply ml-auto flex items-center gap-4 px-6 lg:ml-0 lg:p-0;
	}
</style>
