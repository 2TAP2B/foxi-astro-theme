---
//UI Components
import Button from '../Button.astro'
import List from '../List.astro'

//Partials
import Header from './partials/Header.astro'
import Body from './partials/Body.astro'
import Footer from './partials/Footer.astro'

type PricingTableProps = {
	type: string
	header: {
		title: string
		subtitle: string
		currency: string
		price: string
		perTime: string
		buttonName: string
		buttonLink: string
	}
	body?: {
		listItems: Array<{ listItem: string }>
	}
	footer?: {
		buttonName: string
		buttonLink: string
	}
}

type Props = {
	data: PricingTableProps
	listType?: 'basic' | 'checklist'
	classes?: string
}

const { data, listType, classes } = Astro.props

const { type, header, body, footer } = data
---

<div
	class:list={[
		'pricing lg:max-md-full',
		{ [`pricing--${type}`]: type },
		{ [`${classes}`]: classes }
	]}
>
	<div class="pricing__container">
		<Header type={type}>
			<h3
				class:list={[
					'pricing__header-title',
					{ [`pricing__header-title--featured`]: type === 'featured' }
				]}
			>
				{header.title}

				<span class="pricing__header-subtitle">{header.subtitle}</span>
			</h3>

			<h4
				class:list={[
					'text-5xl font-bold text-neutral-700 lg:text-6xl dark:text-neutral-50',
					{ [`text-primary-50`]: type === 'featured' }
				]}
			>
				<span class="pricing__header-currency">{header.currency}</span>
				<span class="pricing__header-price">{header.price}</span>
				<span class="pricing__header-perTime">/{header.perTime}</span>
			</h4>
			<Button
				size="lg"
				style={type === 'featured' ? 'secondary' : 'primary'}
				elevated
				type="link"
				link={header.buttonLink}
			>
				{header.buttonName}
			</Button>
		</Header>

		{
			body && (
				<Body>
					<List
						type={listType}
						listItems={body.listItems}
						classes={type === 'featured' ? '[&_li]:!text-primary-50 space-y-4' : 'space-y-4'}
						listColor={type === 'featured' ? 'white' : 'primary'}
					/>
				</Body>
			)
		}
		{
			footer && (
				<Footer type={type}>
					<Button
						size="lg"
						style="primary"
						type="link"
						link={footer.buttonLink}
						variation="link"
						classes={type === 'featured' ? '!text-white' : ''}
					>
						{footer.buttonName}
					</Button>
				</Footer>
			)
		}
	</div>
</div>

<style>
	.pricing {
		@apply mx-auto max-w-sm overflow-hidden rounded;
	}
	.pricing__container {
		@apply flex flex-col;
	}
	.pricing__header-title {
		@apply text-xl font-bold text-neutral-700 dark:text-neutral-50 [&.pricing\_\_header-title--featured]:text-primary-50;
	}
	.pricing__header-subtitle {
		@apply block text-sm font-normal;
	}
	.pricing__header-currency {
		@apply text-3xl;
	}
	.pricing__header-price {
		@apply tracking-tighter;
	}
	.pricing__header-perTime {
		@apply text-sm;
	}
	.pricing--basic {
		@apply rounded bg-white text-neutral-500 shadow-lg shadow-neutral-500/30 dark:bg-neutral-800 dark:text-neutral-300 [&_.pricing\_\_header-subtitle]:text-neutral-400;
	}
	.pricing--featured {
		@apply bg-primary-500 text-primary-100 shadow-xl shadow-primary-500/30 [&_.pricing\_\_header-subtitle]:text-primary-200;
	}
</style>
